---
- name: Deploy the Kubernetes Dashboard Namespace
  when: namespace != 'default'
  k8s:
    state: present
    definition: "{{ lookup('template', 'namespace.yml') }}"

- name: Deploy the Kubernetes Dashboard Secret
  k8s:
    state: present
    definition: "{{ lookup('template', 'secret.yml') }}"

- name: Deploy the Kubernetes Dashboard ServiceAccount
  k8s:
    state: present
    definition: "{{ lookup('template', 'serviceaccount.yml') }}"

- name: Deploy the Kubernetes Dashboard Role
  k8s:
    state: present
    definition: "{{ lookup('template', 'role.yml') }}"

- name: Deploy the Kubernetes Dashboard RoleBinding
  k8s:
    state: present
    definition: "{{ lookup('template', 'rolebinding.yml') }}"

- name: Deploy the Kubernetes Dashboard Deployment
  k8s:
    state: present
    definition: "{{ lookup('template', 'deployment.yml') }}"

- name: Deploy the Kubernetes Dashboard Service
  k8s:
    state: present
    definition: "{{ lookup('template', 'svc.yml') }}"
...
